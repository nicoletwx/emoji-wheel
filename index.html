<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>8 Ball Emoji Wheel</title>

<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background: #f4f6f8;
    }

    canvas {
        margin-top: 20px;
    }

    button {
        margin-top: 20px;
        padding: 12px 25px;
        font-size: 18px;
        cursor: pointer;
    }
</style>
</head>

<body>

<h1>ðŸŽ¡ 8 Ball Emoji Wheel</h1>
<canvas id="wheel" width="500" height="500"></canvas><br>
<button onclick="spin()">SPIN</button>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const blue = "ðŸ”µ";
const red = "ðŸ”´";

// generate 256 combinations
const entries = [];
for (let i = 0; i < 256; i++) {
    let combo = "";
    for (let b = 7; b >= 0; b--) {
        combo += (i & (1 << b)) ? red : blue;
    }
    entries.push(combo);
}

// shuffle entries using Fisher-Yates
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}
shuffle(entries);

const center = 250;
const radius = 250;
const arc = 2 * Math.PI / entries.length;
let rotation = 0;

function drawWheel() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (let i = 0; i < entries.length; i++) {
        const angle = rotation + i * arc;
        ctx.beginPath();
        ctx.fillStyle = i % 2 === 0 ? "#dbeafe" : "#fee2e2";
        ctx.moveTo(center, center);
        ctx.arc(center, center, radius, angle, angle + arc);
        ctx.fill();

        ctx.save();
        ctx.translate(center, center);
        ctx.rotate(angle + arc / 2);
        ctx.textAlign = "right";
        ctx.font = "12px Arial";
        ctx.fillStyle = "#000";
        ctx.fillText(entries[i], radius - 10, 5);
        ctx.restore();
    }

    // pointer
    ctx.fillStyle = "black";
    ctx.beginPath();
    ctx.moveTo(center - 10, 5);
    ctx.lineTo(center + 10, 5);
    ctx.lineTo(center, 30);
    ctx.fill();
}

drawWheel();

function spin() {
    let spinTime = 0;
    const spinAngle = Math.random() * 1000 + 1000; // shorter spin

    function rotate() {
        spinTime += 30;
        rotation += (spinAngle - spinTime) * 0.0001; // slightly faster

        drawWheel();

        if (spinTime < spinAngle) {
            requestAnimationFrame(rotate);
        } else {
            showResult();
        }
    }
    rotate();
}

function showResult() {
    const index = Math.floor(
        entries.length - (rotation % (2 * Math.PI)) / arc
    ) % entries.length;

    const result = entries[index];
    // pop up the result
    alert("ðŸŽ¯ Result: " + result);
}
</script>

</body>
</html>
